{{/*
  Table of Contents Partial
  
  Usage: {{ partial "toc.html" . }}
  
  Automatically generates a table of contents from page headings.
  Only shows if the page has at least 2 headings.
*/}}

{{ if .TableOfContents }}
  {{ $toc := .TableOfContents }}
  {{ if gt (len (findRE `<li>` $toc)) 1 }}
    <nav class="toc rounded-xl border border-slate-200 bg-slate-50 p-5" aria-labelledby="toc-heading">
      <h2 id="toc-heading" class="flex items-center gap-2 text-sm font-semibold text-slate-900">
        <svg class="h-4 w-4 text-slate-500" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"/>
        </svg>
        On this page
      </h2>
      <div class="toc-content mt-3 text-sm">
        {{ $toc }}
      </div>
    </nav>
    <style>
      .toc-content ul {
        list-style: none;
        padding-left: 0;
        margin: 0;
      }
      .toc-content li {
        margin-top: 0.5rem;
      }
      .toc-content li:first-child {
        margin-top: 0;
      }
      .toc-content ul ul {
        padding-left: 1rem;
        margin-top: 0.5rem;
      }
      .toc-content a {
        color: #475569;
        text-decoration: none;
        transition: color 150ms;
      }
      .toc-content a:hover {
        color: #0f172a;
      }
      .toc-content li.active > a {
        color: #0f172a;
        font-weight: 500;
      }
    </style>
  {{ end }}
{{ end }}

